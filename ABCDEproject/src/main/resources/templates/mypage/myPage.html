<!DOCTYPE html>
<html xmlns:th="thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>MYPAGE</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
<script>

</script>
</head>
<body>
<div class="container">
	<div class="row">
	<div class="col-4" sec:authorize="isAuthenticated()"><a th:text="|환영합니다, ${#authentication.principal.username}님|"></a></div>
	</div>
	<div class="row justify-content-end">
	<div class="col-auto" sec:authorize="not isAuthenticated()"><a th:href="@{/member/join}" th:text="회원가입"></a></div>
	<div class="col-auto" sec:authorize="not isAuthenticated()"><a th:href="@{/member/loginForm}" th:text="로그인"></a></div>
	<div class="col-auto" sec:authorize="isAuthenticated()"><a th:href="@{/member/logoutin}" th:text="로그아웃"></a></div>
	<div class="col-auto" sec:authorize="isAuthenticated()"><a th:href="@{/member/update}" th:text="|회원정보 수정|"></a></div>
	<div class="col-auto" sec:authorize="isAuthenticated()"><a th:href="@{/member/delete}" th:text="|회원 탈퇴|"></a></div>
	<div class="col-auto" sec:authorize="not isAuthenticated()"><a th:href="@{/member/findId}" th:text="|아이디 찾기|"></a></div>
	</div>
</div>
	<hr>
<div class="container">
<div class="row my-4">
<h3>현재 매칭 상황</h3>
<div class="accordion" id="accordionExample">
  <div class="card" style="width: 80%;">
  <div class="card-header">
  	<div class="row">
  	<div class="col-2">
  	신청번호
  	</div>
  	<div class="col-2">
  	팀이름
  	</div>
  	<div class="col-5">
  	신청일
  	</div>
  	<div class="col-3">
  	상태
  	</div>
  	</div>
  </div>
  <ul class="list-group list-group-flush">
    <li th:each="request:${requestlist}" class="list-group-item">
    <div class="row">
    <div class="col-2"><span th:text="${request.id}"></span></div>
    
    <div class="col-2"><span th:text="${request.team_id}"></span></div>
    
    <div class="col-5"><span th:text="${request.request_date}"></span></div>
    
    <div class="col-3 text-start">
	    <th:block th:switch="${request.state}">
	    	<span th:case="0">매칭중 <button class="btn btn-xs btn-danger" th:onclick="'location.href=\'' + @{/matching/delete(matchingrequestid=${request.id})} + '\''">매칭취소</button></span>
	    	<span th:case="1">매칭완료 <button class="btn btn-xs btn-success" th:onclick="'location.href=\'' + @{/matching/payment(matchingrequestid=${request.id})} + '\''">결제</button> <button class="btn btn-xs btn-danger" th:onclick="'location.href=\'' + @{/matching/delete(matchingrequestid=${request.id})} + '\''">매칭취소</button></span>
	    	<span th:case="2">결제완료(상대방이 결제할때까지 기다려주세요.) </span>
	    	<span th:case="3">성사됨 <button class="btn btn-xs btn-success">경기장 정보</button></span>
	    	<span th:case="4">취소됨 </span>
		</th:block>
	</div>
    
	</div>
    </li>
  </ul>
</div>
  
</div>
</div>
</div>
</body>
</html>